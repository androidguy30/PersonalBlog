---
import Base from "./Base.astro";
import Giscus from "../partials/Giscus.astro";
const { frontmatter } = Astro.props;

const pub =
  typeof frontmatter.pubDate === "string"
    ? new Date(frontmatter.pubDate)
    : frontmatter.pubDate;

const dateStr = pub
  ? pub.toLocaleDateString(undefined, { year: "numeric", month: "short", day: "numeric" })
  : "";
---

<Base title={`${frontmatter.title} — Kausthubh`} description={frontmatter.description} canonical={frontmatter.canonical}>
  <article class="post-wrap">
    <header class="post-head">
      <h1 class="post-title">{frontmatter.title}</h1>

      {frontmatter.description && (
        <p class="post-dek">{frontmatter.description}</p>
      )}

      <div class="post-meta">
        {dateStr}
        {frontmatter.tags?.length > 0 && (
          <>
            {" · "}
            {frontmatter.tags.map((t) => (
              <a class="tag" href={`/tags/${t}`}>{t}</a>
            ))}
          </>
        )}
      </div>
    </header>

    <section class="post-body">
      <slot />
    </section>
  </article>

  <hr class="post-divider" />

  <Giscus />
</Base>
